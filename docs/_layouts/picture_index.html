---
layout: default
---

{% assign target_path = page.target_path | default: page.dir %}

<h2>{{ page.title }}</h2>

<!-- Parent directory link -->
{% assign parts = target_path | split:'/' %}
{% assign parent_length = parts.size | minus: 1 %}
{% assign parent_parts = parts | slice: 0, parent_length %}
{% assign parent_path = parent_parts | join:'/' | append:'/' %}
<p><a href="{{ parent_path | relative_url }}">Parent directory</a></p>

<!--
<p>target_path: {{ target_path }}</p>
<p>parts: {{ parts }}</p>
<p>parent_length: {{ parent_length }}</p>
<p>parent_parts: {{ parent_parts }}</p>
<p>parent_path: {{ parent_path }}</p>
-->

<!-- Subdirectories -->
<h3>Folders</h3>
<ul>
{% assign seen = "" | split: "|" %}
{% for f in site.static_files %}
  {% if f.path contains target_path %}
    {% assign rel = f.path | replace_first: target_path, '' %}
    {% assign sub = rel | split:'/' %}
    {% if sub.size > 1 %}
      {% assign dirname = sub[0] %}
      {% unless seen contains dirname %}
        <li style="list-style: none; padding-left: 0;">
          <a href="{{ target_path | append: dirname | append:'/' | relative_url }}">
            {{ dirname }}/
          </a>
        </li>
        {% assign seen = seen | push: dirname %}
      {% endunless %}
    {% endif %}
  {% endif %}
{% endfor %}
</ul>

<!-- Files -->
<h3>Files</h3>
<style>
  .file-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    padding: 0;
    margin: 0;
    list-style: none;
  }

  .file-card {
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 0.75rem;
    background-color: #fff;
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.04);
  }

  .file-card img {
    width: 100%;
    height: auto;
    display: block;
    border-radius: 3px;
  }

  .file-card-title {
    font-weight: 600;
    margin-bottom: 0.35rem;
    word-break: break-word;
  }

  .file-card-desc {
    margin-top: 0.35rem;
    color: #555;
  }
</style>
<div class="file-grid">
{% assign lfs_base = site.lfs_media_base %}
{% for f in site.static_files %}
  {% if f.path contains target_path %}
    {% assign ext = f.extname | downcase %}
    {% assign rel = f.path | replace_first: target_path, '' %}
    {% unless rel contains '/' %}
      {% assign desc = page.descriptions[f.name] %}

      {% if ext == '.png' or ext == '.jpg' or ext == '.jpeg'
            or ext == '.gif' or ext == '.webp' %}
        {% assign media_url = lfs_base | append: f.path %}
        <div class="file-card">
          <div class="file-card-title">{{ f.name }}</div>
          <a href="{{ media_url }}">
            <img src="{{ media_url }}" alt="{{ f.name }}">
          </a>
          <div class="file-card-desc">{% if desc %}<small>{{ desc }}</small>{% endif %}</div>
        </div>

      {% else %}
        <div class="file-card">
          <a href="{{ f.path | relative_url }}">{{ f.name }}</a><br>
          <div class="file-card-desc">{% if desc %}<small>{{ desc }}</small>{% endif %}</div>
        </div>
      {% endif %}
    {% endunless %}
  {% endif %}
{% endfor %}
</div>


<!--
<h3>static_files path</h3>
<pre>
{% for f in site.static_files %}
{{ f.path }}
{% endfor %}
</pre>
-->








